/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id 'maven-publish'
    id 'com.intershop.gradle.jaxb' version '3.0.0'
}

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    testCompile 'org.junit.jupiter:junit-jupiter-engine:5.4.0'
}

task sourcesJar(type: Jar) {
    classifier = 'sources'
    from(sourceSets.main.allJava)
}

def xsdPath = "${rootDir}/src/main/resources/xsd"
def mainPath = "${rootDir}/src/main/java/"

jaxb {
     javaGen {
         consultaSit {
             outputDir = file(mainPath)
             packageName = 'br.com.dfe.schema'
             binding = file("${rootDir}/src/main/xjb/bindings.xjb")
             schema = file("${xsdPath}/nfe/leiauteConsSitNFe_v4.00.xsd")
         }

         outros {
             outputDir = file(mainPath)
             packageName = 'br.com.dfe.schema'
             binding = file("${rootDir}/src/main/xjb/bindings.xjb")
             schemas = fileTree(dir: "${xsdPath}/nfe", includes: ['procNFe_v4.00.xsd', 'leiauteConsStatServ_v4.00.xsd', 'leiauteInutNFe_v4.00.xsd', 'leiauteNFe_v4.00.xsd'])
         }

         cce {
             header = false
             outputDir = file(mainPath)
             packageName = 'br.com.dfe.schema.cce'
             binding = file("${rootDir}/src/main/xjb/bindings.xjb")
             schemas = fileTree(dir: "${xsdPath}/eventoCCe", include: '**/*.xsd')
         }

         cancelamento {
             header = false
             outputDir = file(mainPath)
             packageName = 'br.com.dfe.schema.canc'
             binding = file("${rootDir}/src/main/xjb/bindings.xjb")
             schemas = fileTree(dir: "${xsdPath}/eventoCanc", include: '**/*.xsd')
         }

         cancelamentoSubst {
             header = false
             outputDir = file(mainPath)
             packageName = 'br.com.dfe.schema.cancsubst'
             binding = file("${rootDir}/src/main/xjb/bindings.xjb")
             schemas = fileTree(dir: "${xsdPath}/eventoCancSubst", include: '**/*.xsd')
         }

         eventoGenerico {
             header = false
             outputDir = file(mainPath)
             packageName = 'br.com.dfe.schema.generico'
             binding = file("${rootDir}/src/main/xjb/bindings.xjb")
             schemas = fileTree(dir: "${xsdPath}/eventoGen", include: '**/*.xsd')
         }
    }
}

clean {
    doFirst {
        delete "${mainPath}/br/com/dfe/schema"
        delete "${rootDir}/src/main/java/META-INF/"
    }
}

group = 'br.com.dfe'
version = '1.01'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
            artifact(sourcesJar)
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

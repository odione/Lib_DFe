/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id 'maven-publish'
    id "com.intershop.gradle.wsdl" version "2.0.2"
}

repositories {
    mavenLocal()
    jcenter()
}

def axisVersion = '1.7.9'

dependencies {
    implementation "org.apache.axis2:axis2-kernel:${axisVersion}"
    api "org.apache.axis2:axis2-adb:${axisVersion}"
    implementation "org.apache.axis2:axis2-transport-local:${axisVersion}"
    api "org.apache.axis2:axis2-transport-http:${axisVersion}"
    implementation "org.apache.axis2:axis2-jaxws:${axisVersion}"
    implementation 'javax.mail:javax.mail-api:1.6.2'
    api 'org.apache.ws.commons.axiom:axiom-api:1.2.22'
}

task sourcesJar(type: Jar) {
    classifier = 'sources'
    from(sourceSets.main.allJava)
}

group = 'br.com.dfe'
version = '1.01'
description = 'WS_DFe'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
            artifact(sourcesJar)
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

def classPath = "${rootDir}/src/main/java"

clean {
    doFirst {
        delete("${classPath}/br")
    }
}

def wsdlPath = "${rootDir}/src/main/resources/WSDL"

wsdl {
    axis2 {
        status {
            wsdlFile = file("${wsdlPath}/NfeStatusServico4.wsdl")
            flattenFiles = true
            suppressPrefixes = true
            outputDir = file classPath
        }

        consulta {
            wsdlFile = file("${wsdlPath}/NfeConsulta4.wsdl")
            flattenFiles = true
            suppressPrefixes = true
            outputDir = file classPath
        }

        inutilizacao {
            wsdlFile = file("${wsdlPath}/NfeInutilizacao4.wsdl")
            flattenFiles = true
            suppressPrefixes = true
            outputDir = file classPath
        }

        evento {
            wsdlFile = file("${wsdlPath}/RecepcaoEvento4.wsdl")
            flattenFiles = true
            suppressPrefixes = true
            outputDir = file classPath
        }

        autorizacao {
            wsdlFile = file("${wsdlPath}/NFeAutorizacao4.wsdl")
            flattenFiles = true
            suppressPrefixes = true
            outputDir = file classPath
        }

        retornoAutorizacao {
            wsdlFile = file("${wsdlPath}/NFeRetAutorizacao4.wsdl")
            flattenFiles = true
            suppressPrefixes = true
            outputDir = file classPath
        }
    }
}